var app=angular.module("PantryApp",["ngCookies","ngRoute","mainController","loginController","listsController","listItemsController"]);app.config(["$routeProvider",function(a){a.when("/login",{templateUrl:"/views/partials/login.html",controller:"LoginController"}).when("/lists",{templateUrl:"/views/partials/lists.html",controller:"ListsController"}).when("/lists/new",{templateUrl:"/views/partials/new_list.html",controller:"ListsController"}).when("/lists/:id",{templateUrl:"views/partials/list.html",controller:"ListItemsController"}).otherwise({redirectTo:"/login"})}]);var liCtrl=angular.module("listItemsController",["ListItemsFactory"]);liCtrl.controller("ListItemsController",["$scope","$routeParams","ListItem",function(a,b,c){c.getList(b.id).then(function(b){a.list=b.data}),a.addListItem=function(){c.create(a.list,a.newListItem).then(function(b){a.list.items.push(b.data),a.newListItem={}})},a["delete"]=function(b,d){c["delete"](b).then(function(b){console.log(b.data),a.list.items.splice(d,1)})}}]);var listCtrl=angular.module("listsController",["listsFactory"]);listCtrl.controller("ListsController",["$scope","$http","$location","List",function(a,b,c,d){d.getList().then(function(b){a.lists=b.data.lists}),a.getList=function(b){d.getList(b).then(function(b){a.list=b.data.list,a.list.items=a.list.items||[]})},a.deleteList=function(a){d.deleteList(a).then(function(a){console.log(a)})},a.addListItem=function(){d.addListItem().then(function(b){a.list.items.push(b.data.item)})},a.deleteListItem=function(a){d.deleteListItem(a).then(function(a){console.log(a)})},a.addList=function(){d.add(a.newList).then(function(b){a.newList={},a.lists.push(b.data.list),c.path("/lists")})}}]);var ctrl=angular.module("loginController",["authService"]);ctrl.controller("LoginController",["$scope","$cookies","$location","Auth",function(a,b,c,d){a.credentials={},a.login=function(){user=d.login(a.credentials).then(function(d){if(a.credentials={},d.data.user){var e=d.data.user;console.log("putting cookies"),b.put("pantry_app_t",e.token),b.put("pantry_app_id",e.id),a.setUser(e),c.path("/lists")}})}}]);var ctrl=angular.module("mainController",["accountService"]);ctrl.controller("MainController",["$scope","$location","$cookies","Account",function(a,b,c,d){d.getByToken(c.get("pantry_app_t")).then(function(b){a.user=b.data}),a.setUser=function(b){a.user=b},a.logout=function(){c.remove("pantry_app_t"),c.remove("pantry_app_id"),a.setUser(null),b.path("/login")},a.header="Well, howdy there..."}]);var accountService=angular.module("accountService",[]);accountService.factory("Account",["$http",function(a){var b={};return b.getByToken=function(b){return a.get("/token/"+b)},b}]);var authService=angular.module("authService",["ngCookies"]);authService.factory("Auth",["$http","$cookies",function(a,b){var c={};return c.login=function(b){return a.post("/login",{user:b})},c}]);var liFactory=angular.module("ListItemsFactory",[]);liFactory.factory("ListItem",["$http",function(a){var b={};return b.getList=function(b){return a.get("/lists/"+b)},b.create=function(b,c){return a.post("/lists/items",{list:b,listItem:c})},b["delete"]=function(b){return a["delete"]("/lists/items/"+b)},b}]);var listModel=angular.module("listsFactory",[]);listModel.factory("List",["$http",function(a){var b={};return b.getList=function(b){return b=b||"",a.get("/lists/"+b)},b.deleteList=function(b){return a["delete"]("/lists/"+b)},b.addListItem=function(b,c){return a.post("/lists/items",{list:b,listItem:c})},b.deleteListItem=function(b){return a["delete"]("/lists/items/"+b)},b.add=function(b){return a.post("/lists",{list:b})},b}]);