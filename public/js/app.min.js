var app=angular.module("PantryApp",["ngCookies","ngRoute","mainController","loginController","listsController"]);app.config(["$routeProvider",function(a){a.when("/login",{templateUrl:"/views/partials/login.html",controller:"LoginController"}).when("/lists",{templateUrl:"/views/partials/lists.html",controller:"ListsController"}).otherwise({redirectTo:"/login"})}]);var listCtrl=angular.module("listsController",["listsFactory"]);listCtrl.controller("ListsController",["$scope","$http","List",function(a,b,c){a.getLists=function(){c.getList().then(function(b){a.lists=b.data.lists})},a.getList=function(b){c.getList(b).then(function(b){a.list=b.data.list,a.list.items=a.list.items||[]})},a.deleteList=function(a){c.deleteList(a).then(function(a){console.log(a)})},a.addListItem=function(){c.addListItem().then(function(b){a.list.items.push(b.data.item)})},a.deleteListItem=function(a){c.deleteListItem(a).then(function(a){console.log(a)})},a.addList=function(){c.addList().then(function(b){a.newList={},a.lists.push(b.data.list)})},a.getLists()}]);var ctrl=angular.module("loginController",["authService"]);ctrl.controller("LoginController",["$scope","$http","Auth",function(a,b,c){a.credentials={},a.login=function(){user=c.login(a.credentials),a.setUser(user)},a.logout=function(){$cookies.remove("pantry_app_t"),$cookies.remove("pantry_app_id"),a.user=null}}]);var ctrl=angular.module("mainController",[]);ctrl.controller("MainController",["$scope","$http","$cookies",function(a,b,c){var d=c.get("pantry_app_t");b.get("/token/"+d).then(function(b){a.user=b.data}),a.setUser=function(b){a.user=b},a.header="Well, howdy there..."}]);var authService=angular.module("authService",["ngCookies"]);authService.factory("Auth",["$http","$cookies",function(a,b){var c={};return c.login=function(c){a.post("/login",{user:c}).then(function(a){console.log("putting cookies");var c=a.data.user;return b.put("pantry_app_t",c.token),b.put("pantry_app_id",c.id),c})},c}]);var listModel=angular.module("listsFactory",[]);listModel.factory("List",["$http",function(a){var b={};return b.getList=function(b){return b=b||"",a.get("/lists/"+b)},b.deleteList=function(b){return a["delete"]("/lists/"+b)},b.addListItem=function(b,c){return a.post("/lists/items",{list:b,listItem:c})},b.deleteListItem=function(b){return a["delete"]("/lists/items/"+b)},b.addList=function(b){return a.post("/lists",{list:b})},b}]);